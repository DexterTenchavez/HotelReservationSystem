@model HotelReservationSystem.Models.Reservation

@{
    ViewData["Title"] = "Create Reservation";
}

<div class="container mt-5">
    <div class="card shadow-lg p-4 rounded-4">
        <h2 class="text-center mb-4">Create Reservation</h2>

        <form asp-action="Create" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

          
                <label class="form-label fw-bold">Reservation No.</label>
                <input asp-for="ReservationNo" class="form-control" readonly placeholder="Auto-generated" />
           

                <label class="form-label fw-bold">Guest Name</label>
                <input asp-for="GuestName" class="form-control" placeholder="Enter guest name" />
                <span asp-validation-for="GuestName" class="text-danger"></span>
           

                <label class="form-label fw-bold">Room Type</label>
                <select asp-for="RoomType" class="form-select" id="roomType">
                    <option value="">-- Select Room Type --</option>
                    <option value="Single">Single - ₱1,000</option>
                    <option value="Double">Double - ₱2,000</option>
                    <option value="Suite">Suite - ₱3,500</option>
                </select>
               

                <label class="form-label fw-bold">Number of Guests</label>
                <input asp-for="NumberOfGuests" class="form-control" id="numGuests" type="number" min="1" value="1" />
                

                <label class="form-label fw-bold">Total Amount</label>
            <input asp-for="TotalAmount" class="form-control" id="totalAmount" type="number" step="0.01" readonly
                   value="@Model.TotalAmount.ToString("0.00")" />

                <button type="submit" class="btn btn-primary px-5">Save Reservation</button>
           
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        const roomPrices = {
            "Single": 1000,
            "Double": 2000,
            "Suite": 3500
        };

        document.getElementById("roomType").addEventListener("change", calculateTotal);
        document.getElementById("numGuests").addEventListener("input", calculateTotal);

        function calculateTotal() {
            const roomType = document.getElementById("roomType").value;
            const guests = parseInt(document.getElementById("numGuests").value) || 1;
            const totalField = document.getElementById("totalAmount");

            if (roomType && roomPrices[roomType]) {
                const total = roomPrices[roomType] * guests;
                totalField.value = total.toFixed(2);
            } else {
                totalField.value = "";
            }
        }
    </script>
}
